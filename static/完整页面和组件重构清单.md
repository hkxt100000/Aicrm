# 🎯 完整页面和组件重构清单

## 📅 创建日期
2026-01-27

---

## 📊 完整扫描结果

### 一、主要页面模块（16个）

| # | 模块ID | 模块名称 | 行号 | 状态 | 优先级 |
|---|--------|---------|------|------|--------|
| 1 | `module-dashboard` | 工作台 | 338 | ✅ 已完成 | 高 |
| 2 | `module-customers` | 客户列表 | 407 | ⏳ 待重构 | 高 |
| 3 | `module-customer-profile` | 客户画像 | 591 | ⏳ 待重构 | 高 |
| 4 | `module-enterprise-tags` | 企业标签 | 830 | ⏳ 待重构 | 中 |
| 5 | `module-enterprise-contacts` | 企业通讯录 | 861 | ⏳ 待重构 | 中 |
| 6 | `module-customer-groups` | 客户群列表 | 937 | ⏳ 待重构 | 中 |
| 7 | `module-group-tags` | 客户群标签 | 1060 | ⏳ 待重构 | 中 |
| 8 | `module-welcome-msg` | 欢迎语设置 | 1112 | ⏳ 待重构 | 低 |
| 9 | `module-customer-broadcast` | 客户广播 | 1127 | ⏳ 待重构 | 低 |
| 10 | `module-moments-publish` | 发朋友圈 | 1142 | ⏳ 待重构 | 低 |
| 11 | `module-moments-records` | 朋友圈记录 | ? | ⏳ 待重构 | 低 |
| 12 | `module-group-welcome` | 进群欢迎语 | ? | ⏳ 待重构 | 低 |
| 13 | `module-group-broadcast` | 群发消息 | ? | ⏳ 待重构 | 低 |
| 14 | `module-employee-manage` | 员工管理 | ? | ⏳ 待重构 | 高 |
| 15 | `module-permission-manage` | 权限管理 | ? | ⏳ 待重构 | 高 |
| 16 | `module-data-sources` | 数据源管理 | ? | ⏳ 待重构 | 中 |

### 二、弹窗组件（发现 15+ 个）

#### A. HTML中的静态弹窗（2个）

| # | 弹窗ID | 用途 | 文件 | 行号 | 状态 |
|---|--------|------|------|------|------|
| 1 | `employeeModal` | 新增/编辑员工 | index.html | 1829 | ⏳ 待重构 |
| 2 | `deleteModal` | 删除确认 | index.html | 1876 | ⏳ 待重构 |
| 3 | `add-follow-modal` | 添加跟进记录 | customer-detail.html | 106 | ⏳ 待重构 |

#### B. JavaScript动态创建的弹窗（13+ 个）

| # | 弹窗类型 | 触发位置 | 文件 | 行号 | 状态 |
|---|---------|---------|------|------|------|
| 1 | confirm | 删除客户确认 | script.js | 864 | ⏳ 待重构 |
| 2 | confirm | 停止同步确认 | script.js | 1022 | ⏳ 待重构 |
| 3 | confirm | 通用删除确认 | script.js | 1822 | ⏳ 待重构 |
| 4 | confirm | 企业ID错误确认 | script.js | 1854 | ⏳ 待重构 |
| 5 | confirm | 配置凭证确认 | script.js | 1862 | ⏳ 待重构 |
| 6 | confirm | 配置凭证确认2 | script.js | 1871 | ⏳ 待重构 |
| 7 | alert | 提示信息 | script.js | 2362 | ⏳ 待重构 |
| 8 | confirm | 打开企微确认 | script.js | 2368 | ⏳ 待重构 |
| 9 | confirm | 重新配置确认 | script.js | 2378 | ⏳ 待重构 |
| 10 | confirm | 删除表格确认 | script.js | 2399 | ⏳ 待重构 |
| 11 | confirm | 删除标签组 | group-tags-v2.js | 295 | ⏳ 待重构 |
| 12 | confirm | 删除标签 | group-tags-v2.js | 383 | ⏳ 待重构 |
| 13 | confirm | 停止同步标签 | group-tags-v2.js | 572 | ⏳ 待重构 |
| 14 | alert | 输入验证提示 | wecom-bot.js | 156-486 | ⏳ 待重构 |
| 15 | confirm | 发送测试消息 | wecom-bot.js | 346 | ⏳ 待重构 |
| 16 | confirm | 删除机器人 | wecom-bot.js | 374 | ⏳ 待重构 |
| 17 | confirm | 重新生成密钥 | data-source.js | 436 | ⏳ 待重构 |
| 18 | confirm | 删除记录 | data-source.js | 1032 | ⏳ 待重构 |
| 19 | confirm | 禁用/启用员工 | employee-manage.js | 446 | ⏳ 待重构 |

### 三、特殊页面（2个）

| # | 页面 | 文件 | 用途 | 状态 |
|---|------|------|------|------|
| 1 | 登录页 | login.html | 用户登录 | ⏳ 待检查 |
| 2 | 客户详情 | customer-detail.html | 客户详细信息 | ⏳ 待重构 |

---

## 🎯 逐页面重构计划（16阶段）

### 【阶段 1】工作台页面 ✅
**状态**：已完成
**内容**：统计卡片（4个）已重构

---

### 【阶段 2】客户列表页面 ⏳
**行号**：407-590
**时间**：2小时

#### 涉及元素：
1. 页面标题和面包屑
2. 同步按钮组（增量同步、全量同步）
3. 导出按钮
4. 搜索框
5. 筛选器按钮
6. 客户数据表格
   - 表头（头像、姓名、性别、类型、手机号、状态、操作时间、客户来源、操作）
   - 表格行
   - 操作按钮（查看、编辑、删除）
7. 分页组件

#### 需要重构的CSS类：
```css
.page-header { }
.page-title { }
.page-actions { }
.sync-buttons { }
.btn-sync-incremental { }
.btn-sync-full { }
.btn-outlined { }
.toolbar { }
.search-box { }
.filter-buttons { }
.customer-table { }
.customer-table th { }
.customer-table td { }
.customer-table tr:hover { }
.action-buttons { }
.pagination { }
```

---

### 【阶段 3】客户画像页面 ⏳
**行号**：591-829
**时间**：3小时

#### 涉及元素：
1. 页面标题
2. 统计卡片区域（6个卡片）
   - 活跃人数：159069人
   - 来访次数：0人
   - 咨询次数：7人
   - 成交次数：0人
   - 成交金额：55人
   - 转介绍次数：2587人
3. 标签分类区域（彩色标签云）
   - 各种颜色的标签按钮
4. 数据趋势图表区域
   - 多个趋势图表
5. 时间筛选器

#### 需要重构的CSS类：
```css
.profile-stats { }
.profile-stat-card { }
.stat-card { }
.stat-icon { }
.stat-value { }
.tag-cloud { }
.tag-category { }
.tag-button { }
.chart-container { }
.chart-filters { }
```

---

### 【阶段 4】企业标签页面 ⏳
**行号**：830-860
**时间**：2小时

#### 涉及元素：
1. 页面标题
2. 同步按钮
3. 标签列表
4. 新建标签按钮
5. 编辑/删除标签操作

---

### 【阶段 5】企业通讯录页面 ⏳
**行号**：861-936
**时间**：2小时

#### 涉及元素：
1. 页面标题
2. 同步按钮
3. 搜索框
4. 员工列表表格
5. 分页

---

### 【阶段 6】客户群列表页面 ⏳
**行号**：937-1059
**时间**：2小时

#### 涉及元素：
1. 页面标题
2. 同步按钮
3. 搜索框
4. 客户群表格
5. 分页

---

### 【阶段 7】客户群标签页面 ⏳
**行号**：1060-1111
**时间**：2小时

---

### 【阶段 8】欢迎语设置页面 ⏳
**行号**：1112-1126
**时间**：1.5小时

---

### 【阶段 9】客户广播页面 ⏳
**行号**：1127-1141
**时间**：1.5小时

---

### 【阶段 10】发朋友圈页面 ⏳
**行号**：1142-?
**时间**：1.5小时

---

### 【阶段 11】员工管理页面 ⏳
**时间**：2.5小时

#### 涉及元素：
1. 页面标题
2. 新增员工按钮
3. 搜索框
4. 员工列表表格
5. 操作按钮（编辑、禁用/启用）
6. 新增/编辑员工弹窗
7. 删除确认弹窗

---

### 【阶段 12】权限管理页面 ⏳
**时间**：2.5小时

---

### 【阶段 13】数据源管理页面 ⏳
**时间**：3小时

---

### 【阶段 14】所有弹窗重构 ⏳
**时间**：4小时

#### 需要重构的弹窗：
1. **员工管理弹窗**（employeeModal）
   - 新增员工表单
   - 编辑员工表单
   - 删除确认对话框

2. **标签管理弹窗**
   - 新增标签组
   - 编辑标签组
   - 新增标签
   - 编辑标签
   - 删除确认

3. **客户操作弹窗**
   - 客户详情查看
   - 编辑客户信息
   - 删除客户确认

4. **数据源弹窗**
   - 新增数据源
   - 编辑数据源
   - 删除数据源确认

5. **所有 confirm() 替换为 Apple 风格确认框**
6. **所有 alert() 替换为 Apple 风格提示框**

---

### 【阶段 15】登录页面检查 ⏳
**时间**：1小时

---

### 【阶段 16】客户详情页面 ⏳
**文件**：customer-detail.html
**时间**：2小时

---

## 📋 重构执行顺序（推荐）

### 第一批（高优先级，用户最关注）：
1. ✅ 阶段1 - 工作台（已完成）
2. ⏳ 阶段3 - 客户画像（用户截图的页面）
3. ⏳ 阶段2 - 客户列表
4. ⏳ 阶段11 - 员工管理
5. ⏳ 阶段12 - 权限管理

### 第二批（中优先级）：
6. ⏳ 阶段4 - 企业标签
7. ⏳ 阶段5 - 企业通讯录
8. ⏳ 阶段6 - 客户群列表
9. ⏳ 阶段7 - 客户群标签
10. ⏳ 阶段13 - 数据源管理

### 第三批（低优先级）：
11. ⏳ 阶段8 - 欢迎语设置
12. ⏳ 阶段9 - 客户广播
13. ⏳ 阶段10 - 发朋友圈

### 第四批（通用组件）：
14. ⏳ 阶段14 - 所有弹窗重构
15. ⏳ 阶段15 - 登录页面
16. ⏳ 阶段16 - 客户详情页面

---

## ✅ 每个阶段的验收标准

### 视觉标准：
- [ ] 所有元素符合 Apple 设计规范
- [ ] 无橙色或不协调的颜色
- [ ] 圆角统一（8/12/16/20px）
- [ ] 间距统一（4/8/12/16/20/24/32px）
- [ ] 字体统一（11/12/13/15/17/20/28px）

### 交互标准：
- [ ] 悬停动画流畅（0.2s）
- [ ] 焦点状态清晰
- [ ] 按钮反馈及时
- [ ] 加载状态明确
- [ ] 错误提示友好

### 兼容性标准：
- [ ] Chrome 浏览器正常
- [ ] Safari 浏览器正常
- [ ] 暗黑模式自动适配
- [ ] 响应式布局正常

---

## 🎯 立即开始

现在开始 **阶段3 - 客户画像页面** 重构，因为这是用户截图中显示的页面。

准备好了吗？让我们开始！💪
